<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes, viewport-fit=cover" />
  <title>EGX Recommendations</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">ููุตุฉ ุชูุตูุงุช EGX go live v 1,0 </div>
    <nav class="nav">
      <a class="btn" id="signupLink" href="signup.html">ุฅูุดุงุก ุญุณุงุจ</a>
      <a class="btn btn-ghost" id="loginLink" href="login.html">ุชุณุฌูู ุฏุฎูู</a>
      <button class="btn btn-ghost" id="changePassBtn" style="display:none;">ุชุบููุฑ ูููุฉ ุงูุณุฑ</button>
      <button class="btn btn-warn" id="logoutBtn" style="display:none;">ุฎุฑูุฌ</button>
    
      <label class="themeSwitch" title="Night/Day">
        <input type="checkbox" id="themeToggle">
        <span>๐/โ๏ธ</span>
      </label>
    </nav>
  </header>

  <main class="layout">
    <section class="main">
      <div class="card disclaimer">
        <div class="disclaimer-title">ุชูุจูู ููู ูุฅุฎูุงุก ุงููุณุคูููุฉ</div>
        <div class="disclaimer-text">
          ูุฐุง ุงููููุน ูุนุฑุถ ุชูุตูุงุช ุชุญููููุฉ ููุท ุฏูู ุฃู ูุณุคูููุฉ. ุงูุจูุฑุตุฉ ุงุณุชุซูุงุฑ ุนุงูู ุงููุฎุงุทุฑ ูููุณุช ููุงูุฑุฉุ ููุฌุจ ุงุณุชุฎุฏุงู ุฃููุงู ูุงุฆุถุฉ ููุท.
          ุงููุฑุงุฑ ุงูุงุณุชุซูุงุฑู ูุณุคูููุฉ ุดุฎุตูุฉ ุจุงููุงูู. ูุฐุง ุงููููุน ูุฌุฑุฏ ูุญุชูู ููุง ุนูุงูุฉ ูู ุจุฃู ููุน ูู ุฃููุงุน ุงูููุงูุฑุฉ.
        </div>
      </div>

      <div class="card">
        <div class="row">
          <div class="field">
            <label>ุงุฎุชูุงุฑ ุงูุณูู</label>
            <select id="stockSelect"></select>
          </div>
          <div class="field">
            <label>ุจุญุซ ุณุฑูุน ุจุงุณู ุงูุณูู</label>
            <input id="stockSearch" type="text" placeholder="ุงูุชุจ: COMI / SWDY / ... ุซู Enter" />
          </div>
        </div>

        <div class="chartWrap">
          <div id="tv_chart"></div>
        </div>
      </div>

      <div class="card">
        <div class="card-title">ุฌุฏูู ุงูุชูุตูุงุช (Public)</div>

        <div class="row between" id="recFilterBar" style="display:none; margin-top:6px;">
          <div class="muted" id="recFilterText"></div>
          <button class="btn btn-ghost" id="clearRecFilterBtn">ุนุฑุถ ูู ุงูุชูุตูุงุช</button>
        </div>

        <div class="row between">
          <div class="muted">ุงูุชูุตูุงุช ุงูุนุงูุฉ ุธุงูุฑุฉ ููุฌููุน. ุฅุถุงูุฉ ุชูุตูุฉ ุชุชุทูุจ ุชุณุฌูู ุฏุฎูู.</div>
          <button class="btn" id="openAddModalBtn">ุฅุถุงูุฉ ุชูุตูุฉ ุฌุฏูุฏุฉ</button>
        </div>

        <div class="tableWrap">
          <table class="table" id="recTable">
            <thead>
              <tr>
                <th>ุซูุฉ ุงููุญูู</th>
                <th>ุงููุญูู</th>
                <th>ุงูุณูู</th>
                <th>ุงูุฏุฎูู</th>
                <th>ุงููุฏู</th>
                <th>ูุณุจุฉ ุฌูู ุงูุฃุฑุจุงุญ</th>
                <th>ุงูุซูู ูู ุงูุชูุตูู</th>
                <th>ุชุงุฑูุฎ ุงูุชูุตูุฉ</th>
                <th>ุชุงุฑูุฎ ุงูุฎุฑูุฌ</th>
                <th>ููุงุญุธุงุช</th>
                <th>ุชุงุฑูุฎ ุงูุฅุถุงูุฉ</th>
                <th id="adminColHead" style="display:none;">ุฅุฏุงุฑุฉ</th>
              </tr>
            </thead>
            <tbody id="recBody"></tbody>
          </table>
        </div>
      </div>
    </section>

    <aside class="side">
      <div class="card award">
        <div class="award-title">๐ ุฌุงุฆุฒุฉ ุฃูุถู ูุญูู</div>
        <div class="award-text">ุชูููุญ ูุฃูุถู ุฃุฏุงุก ุชุญูููู ุจูุงุกู ุนูู ุฌูุฏุฉ ุงูุชูุตูุงุช ูุงููุชุงุจุนุฉ.</div>
      </div>

      <!-- Change password (shown after login) -->
      <div class="card" id="pwPanel" style="display:none;">
        <div class="card-title">ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</div>
        <form id="changePassForm" class="miniForm">
          <div class="field">
            <label>ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ</label>
            <input id="cpCurrent" type="password" required />
          </div>
          <div class="field">
            <label>ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ</label>
            <input id="cpNew" type="password" required />
          </div>
          <div class="field">
            <label>ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ</label>
            <input id="cpNew2" type="password" required />
          </div>
          <label class="tinyRow" style="margin-top:6px;">
            <input type="checkbox" id="cpShow" />
            <span>ุฅุธูุงุฑ ูููุฉ ุงููุฑูุฑ</span>
          </label>
          <button class="btn" type="submit" style="width:100%; margin-top:8px;">ุชุญุฏูุซ</button>
          <div class="muted" id="changePassMsg" style="margin-top:6px;"></div>
        </form>
      </div>

      <!-- Admin/CEO Panel (hidden by default) -->
      <div class="card" id="adminPanel" style="display:none;">
        <div class="card-title">ููุญุฉ ุงูุชุญูู</div>
        <div class="muted" id="adminRoleLine"></div>

        <div class="adminBlock" id="siteSettingsBlock">
          <div class="subTitle">ุฅุนุฏุงุฏุงุช ุงููููุน</div>
          <label class="tinyRow">
            <input type="checkbox" id="registrationToggle">
            <span>ูุชุญ ุงูุชุณุฌูู (Signup)</span>
          </label>
          <div class="muted" id="registrationMsg" style="margin-top:6px;"></div>
        </div>

        <hr class="sep" />


        <div class="adminBlock" id="adminRecBlock">
          <div class="muted">ููููู ุฅุฎูุงุก/ุฅุธูุงุฑ ุงูุชูุตูุงุช ูู ุนููุฏ "ุฅุฏุงุฑุฉ" ูู ุงูุฌุฏูู.</div>
          <button class="btn btn-ghost" id="toggleShowHiddenBtn">ุนุฑุถ/ุฅุฎูุงุก ุงูุชูุตูุงุช ุงููุฎููุฉ</button>
        </div>

        <hr class="sep" />

        <div class="adminBlock" id="userMgmtBlock">
          <div class="subTitle">ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู (Admin)</div>

          <form id="createUserForm" class="miniForm">
            <div class="field">
              <label>Username</label>
              <input id="newAdminUsername" type="text" placeholder="analyst_1" required />
            </div>
            <div class="field">
              <label>Email</label>
              <input id="newAdminEmail" type="email" placeholder="admin@example.com" required />
            </div>
            <div class="field">
              <label>Password</label>
              <input id="newAdminPassword" type="text" placeholder="password" required />
            </div>
            <div class="field">
              <label>Role</label>
              <select id="newUserRole">
                <option value="basic">basic</option>
                <option value="user">user</option>
                <option value="admin_add">admin_add</option>
                <option value="admin_del">admin_del</option>
                <option value="admin_rcmd">admin_rcmd</option>
                <option value="admin_block">admin_block</option>
                <option value="admin">admin</option>
              </select>
            </div>
            <div class="row between">
              <button class="btn" type="submit">ุฅุถุงูุฉ User</button>
              <span class="muted" id="createUserMsg"></span>
            </div>
          </form>

          <div class="subTitle">ูุงุฆูุฉ ุงููุณุชุฎุฏููู</div>
          <div class="muted" style="margin-bottom:8px;">ููููู ุญุฐู/ุชุนุฏูู ุฃู ูุณุชุฎุฏู (ูุงุนุฏุง CEO ุฃู ุญุณุงุจู ุงูุญุงูู).</div>

          <div class="field" style="margin:10px 0 6px;">
            <label>ุจุญุซ ุจุงูุฅูููู</label>
            <input id="userEmailSearch" type="search" placeholder="ุงุจุญุซ: name@example.com" />
          </div>

          <div class="field" style="margin:10px 0 6px;">
            <label>ุจุญุซ ุจุงูุตูุงุญูุฉ (Role)</label>
            <select id="userRoleFilter">
              <option value="">ุงููู</option>
              <option value="ceo">ceo</option>
              <option value="admin">admin</option>
              <option value="admin_add">admin_add</option>
              <option value="admin_del">admin_del</option>
              <option value="admin_rcmd">admin_rcmd</option>
              <option value="admin_block">admin_block</option>
              <option value="user">user</option>
              <option value="basic">basic</option>
            </select>
          </div>

          <div class="chips" id="roleChips" style="margin:6px 0 10px;">
            <button class="chipBtn" type="button" data-role="">ุงููู</button>
            <button class="chipBtn" type="button" data-role="ceo">ceo</button>
            <button class="chipBtn" type="button" data-role="admin">admin</button>
            <button class="chipBtn" type="button" data-role="admin_add">admin_add</button>
            <button class="chipBtn" type="button" data-role="admin_del">admin_del</button>
            <button class="chipBtn" type="button" data-role="admin_rcmd">admin_rcmd</button>
            <button class="chipBtn" type="button" data-role="admin_block">admin_block</button>
            <button class="chipBtn" type="button" data-role="user">user</button>
            <button class="chipBtn" type="button" data-role="basic">basic</button>
          </div>

          <div class="tableWrap">
            <table class="table" id="allUsersTable">
              <thead>
                <tr>
                  <th>Username</th>
                  <th>Email</th>
                  <th>Role</th>
                  <th>Created</th>
                  <th>Blocked</th>
                  <th>ุฅุฏุงุฑุฉ</th>
                </tr>
              </thead>
              <tbody id="allUsersBody"></tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="card contact">
        <div class="card-title">Contact Us</div>
        <div class="contact-text">contact.support@egxstocks.com</div>
      </div>

      <div class="card notes">
        <div class="card-title">ููุงุญุธุงุช</div>
        <div class="muted">
          - ุงูุฃุณุนุงุฑ ุงููุนุฑูุถุฉ ููุณุช ูุญุธูุฉ (ุงูุชุดุงุฑุช ูู TradingView ููุฏ ูููู ูุชุฃุฎุฑ).<br/>
          - ูุฏู ุงููููุน ูู ุชูุธูู ุงูุชูุตูุงุช ูุนุฑุถูุง ุจุดูู ุงุญุชุฑุงูู.
        </div>
      </div>
    </aside>
  </main>

  <!-- Modal -->
  <div class="modal" id="addModal" aria-hidden="true">
    <div class="modal-card">
      <div class="modal-head">
        <div class="modal-title">ุฅุถุงูุฉ ุชูุตูุฉ ุฌุฏูุฏุฉ</div>
        <button class="iconBtn" id="closeAddModalBtn">โ</button>
      </div>

      <form id="addRecForm" class="modal-body">
        <div class="row">
          <div class="field">
            <label>ุงูุณูู</label>
            <select id="addStock"></select>
          </div>
          <div class="field">
            <label>ุณุนุฑ ุงูุฏุฎูู</label>
            <input id="addEntry" type="number" step="0.01" placeholder="Entry Price" />
          </div>
        </div>
        <div class="row">
          <div class="field">
            <label>ุงููุฏู</label>
            <input id="addTarget" type="number" step="0.01" placeholder="Take Profit" />
          </div>
          <div class="field">
            <label>ูุณุจุฉ ุฌูู ุงูุฃุฑุจุงุญ</label>
            <input id="addProfitPct" type="text" placeholder="%" readonly />
          </div>
          <div class="field">
            <label>ุชุงุฑูุฎ ุงูุชูุตูุฉ</label>
            <input id="addRecDate" type="date" />
          </div>
        </div>
        <div class="row">
          <div class="field">
            <label>ุชุงุฑูุฎ ุงูุฏุฎูู</label>
            <input id="addEntryDate" type="date" />
          </div>
          <div class="field">
            <label>ุชุงุฑูุฎ ุฌูู ุงูุฃุฑุจุงุญ (ุงูุฎุฑูุฌ)</label>
            <input id="addExitDate" type="date" />
          </div>
        </div>
        <div class="field">
          <label>ููุงุญุธุงุช</label>
          <textarea id="addNotes" rows="3" placeholder="Notes"></textarea>
        </div>

        <div class="row between">
          <div class="muted" id="addRecHint"></div>
          <button class="btn" type="submit">Submit</button>
        </div>
      </form>
    </div>
  </div>

  <script src="tv.js"></script>
  <script type="module" src="app.js"></script>
  <script src="theme.js"></script>
</body>
</html>
